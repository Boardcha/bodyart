function getCookie(e){for(var a=e+"=",t=decodeURIComponent(document.cookie).split(";"),o=0;o<t.length;o++){for(var s=t[o];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(a))return s.substring(a.length,s.length)}return""}function setCookie(e,a,t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);o="expires="+o.toUTCString();document.cookie=e+"="+a+";"+o+";path=/"}$("body").on("shown.bs.modal","#updateAddress",function(){$("input:visible:enabled:first",this).focus()}),$("body").on("hidden.bs.modal",function(){$(".modal form").removeClass("was-validated"),$(".modal :submit, .modal :button").prop("disabled",!1),$(".modal input").val(""),$("#message-create-account, #message-forgot").html("")}),0<getCookie("cartCount")&&$(".cart-count").html(getCookie("cartCount")),$("#form-filters").submit(function(){$("select, input").each(function(){with($(this))""==val()&&remove()})}),$("#filters .cat-select").on("change",function(){var e=$(this).attr("data-name");$(".sub-"+e).prop("checked",this.checked)}),$("#filters .two-filters").on("change",function(){var e=$(this).attr("data-filter2"),a=$(this).attr("data-filter2-value");$('input[name="'+e+'"][value="'+a+'"]').prop("checked",this.checked)}),$(function(){$("[data-hide]").on("click",function(){$(this).closest("."+$(this).attr("data-hide")).hide()})});var h=$(".hamburger");h.on("click",function(){h.hasClass("fa-bars")?h.removeClass("fa-bars").addClass("fa-times"):h.removeClass("fa-times").addClass("fa-bars")}),$(".mobile-search-icon").on("click",function(){$("#mobilemenu, #accountmenu-bar").collapse("hide"),$(".hamburger").removeClass("fa-times").addClass("fa-bars")}),$(".hamburger").on("click",function(){$("#filters, #accountmenu-bar").collapse("hide")}),$("#mobileaccountDropdown").on("click",function(){$("#filters, #mobilemenu").collapse("hide"),$(".hamburger").removeClass("fa-times").addClass("fa-bars")}),$("#filters input:checkbox, #filters input:radio").on("change",function(){var e=[];$("#filters input:checked").map(function(){e.push($(this).attr("data-friendly"))}),$("#filter-builder-text").html(e.join(", "))}),$("#filters").is(":visible")?$("#body-column").addClass("col-lg-9 col-xl-10"):$("#body-column").removeClass("col-lg-9 col-xl-10"),$("#toggle-filters-mobile, #toggle-filters-pc").click(function(){$("#filters").is(":visible")?$("#body-column").removeClass("col-lg-9 col-xl-10"):$("#body-column").addClass("col-lg-9 col-xl-10")}),$(".btn-cart-load").click(function(){$(".cart-mini-load").load("/cart/inc_cart_display_mini_bootstrap.asp")}),$("#frm-signin").submit(function(e){$(".alert-signin").hide();var a=$("#frm-signin");!1===a[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),console.log("invalid form elements")):$.ajax({method:"post",dataType:"json",url:"/accounts/ajax_sign_in.asp",data:$("#frm-signin").serialize(),beforeSend:function(){$("#btn_signin").attr("disabled","disabled")}}).done(function(e,a){"logged-in"===e.status?window.location="account.asp":("not-active"===e.status?$(".signin-message").html("This account is not active. Please check your inbox for activation link. If you did not receive the email, please check your spam folder."):$(".signin-message").html("User name or password did not match. Please try again."),$(".alert-signin").show(),$("#btn_signin").removeAttr("disabled"))}).fail(function(){$(".signin-message").html("No account found"),$(".alert-signin").show(),$("#btn_signin").removeAttr("disabled")}),a[0].classList.add("was-validated"),e.preventDefault()}),$("#regEmail").blur(function(){var e=$("#regEmail").val();$.ajax({method:"POST",dataType:"json",url:"/accounts/ajax_check_duplicate_account.asp",data:{email:e}}).done(function(e,a){"yes"==e.duplicate&&($("#message-create-account").html('<div class="alert alert-danger">A duplicate account has been found. Please <a class="alert-link" href="#" data-toggle="modal" data-target="#signin" data-dismiss="modal">login here</a>. If you have forgotten your password you can use <a class="alert-link" href="#" data-toggle="modal" data-target="#forgotpassword" data-dismiss="modal">this link</a> to retrieve it. Or, you can create a new account below.</div>'),$("#btn-create-account").prop("disabled",!0)),"no"==e.duplicate&&($("#message-create-account").html(""),$("#btn-create-account").prop("disabled",!1))}).fail(function(e,a){console.log("ajax failed")})}),$("#Regpassword").blur(function(){$("#Regpassword").val()!=$("#password_confirmation").val()?($("#message-create-account").html('<div class="alert alert-danger">Passwords do not match</div>'),$("#btn-create-account").prop("disabled",!0)):($("#message-create-account").html(""),$("#btn-create-account").prop("disabled",!1))}),$("#frm-register").submit(function(e){var a=$("#frm-register");!1===a[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),console.log("invalid form elements")):$.ajax({method:"post",dataType:"json",url:"/accounts/ajax_create_account.asp",data:$("#frm-register").serialize()}).done(function(e,a){"no"==e.duplicate?($("#message-create-account").html('<div class="alert alert-success">An email has been sent to your email address containing an activation link. Please click on the link to activate your account. If you do not receive the email within a few minutes, please check your spam folder.</div>'),$("#btn-create-account").prop("disabled",!0)):$("#message-create-account").html('<div class="alert alert-danger">There is already an account registered with this e-mail, or another error occurred. If you have forgotten your password you can retrieve it <a class="alert-link" href="#" data-toggle="modal" data-target="#forgotpassword" data-dismiss="modal">at this link</a></div>')}).fail(function(e,a,t,o){$("#message-create-account").html('<div class="alert alert-danger">Error occurred with form information. Please make sure all fields are filled out correctly.</div>')}),a[0].classList.add("was-validated"),e.preventDefault()}),$("#frmForgotPass").submit(function(e){var a=$("#frmForgotPass");!1===a[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),console.log("invalid form elements")):$("#message-forgot").load("/accounts/ajax_forgot_password.asp",{email:$("#forgot_email").val()},function(){}),a[0].classList.add("was-validated"),e.preventDefault()}),$("#btn-cancel-addons").on("click",function(){Cookies.remove("OrderAddonsActive",{path:"/"}),window.location="/cart.asp?addons=removed"}),$("#footer-newsletter-signup").on("click",function(){$("#footer-newsletter-signup").html('<i class="fa fa-spinner fa-2x fa-spin"></i>'),$("#footer_newsletter_email").hide(),$.ajax({method:"post",dataType:"json",url:"/constant-contact/cc-add-contact.asp?email="+$("#footer_newsletter_email").val()}).done(function(e){null!=e.action&&($("#footer-newsletter-msg").html('<span class="alert alert-success m-0 p-2">Thanks for signing up!</span>').show().delay(5e3).fadeOut("slow"),$("#footer-newsletter-signup").hide()),null!=e.error_message&&($("#footer-newsletter-msg").html('<span class="alert alert-danger m-0 p-2">Invalid email</span>').show().delay(5e3).fadeOut("slow"),$("#footer-newsletter-signup").html("Sign Up!"),$("#footer_newsletter_email").show())}).fail(function(e){$("#footer-newsletter-msg").html('<span class="alert alert-danger">Website ajax error</span>').show(),$("#footer-newsletter-signup").html("Sign Up!"),$("#footer_newsletter_email").show()})}),$("#darkmode-switch").on("click",function(){$("#darkmode-switch").is(":checked")?($("head").append('<link href="/CSS/baf-dark.min.css" rel="stylesheet" id="darkmode" />'),$('link[rel=stylesheet][id="lightmode"]').prop("disabled",!0),Cookies.set("darkmode","on",{expires:7300})):($("head").append('<link href="/CSS/baf.min.css" rel="stylesheet" id="lightmode" />'),$('link[rel=stylesheet][id="darkmode"]').remove(),Cookies.set("darkmode","off",{expires:7300}))});