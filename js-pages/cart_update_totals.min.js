var totalWithoutShipping=0,salesTax=0,shippingWeight=0,free_items_count=0;function calcAllTotals(e){$(".checkout_button, #paypal-button-container").hide();var shipping_option=$('input[name="shipping-option"]:checked').val();$(".cart_grand-total").html('<i class="fa fa-spinner fa-spin"></i> Calculating');var page_name=location.pathname.substring(location.pathname.lastIndexOf("/")+1),tax_country="",tax_state="",tax_zip="",tax_address="",state_taxed="";$("input:radio[name='cim_shipping']").is(":checked")?(tax_country=$("input[name='cim_shipping']:checked").attr("data-country"),tax_state=$("input[name='cim_shipping']:checked").attr("data-state"),tax_zip=$("input[name='cim_shipping']:checked").attr("data-zip"),tax_address=$("input[name='cim_shipping']:checked").attr("data-address")):(tax_country=$("select[name='shipping-country']").val(),tax_state=$("select[name='shipping-state']").val(),tax_zip=$("input[name='shipping-zip']").val(),tax_address=$("input[name='shipping-address']").val()+" "+$("input[name='shipping-address2']").val()),"AR"!==tax_state&&"CA"!==tax_state&&"CO"!==tax_state&&"FL"!==tax_state&&"GA"!==tax_state&&"HI"!==tax_state&&"IL"!==tax_state&&"IN"!==tax_state&&"IA"!==tax_state&&"KS"!==tax_state&&"KY"!==tax_state&&"LA"!==tax_state&&"MA"!==tax_state&&"ME"!==tax_state&&"MD"!==tax_state&&"MI"!==tax_state&&"MN"!==tax_state&&"NE"!==tax_state&&"NV"!==tax_state&&"NJ"!==tax_state&&"NC"!==tax_state&&"OH"!==tax_state&&"OK"!==tax_state&&"PA"!==tax_state&&"RI"!==tax_state&&"SD"!==tax_state&&"TX"!==tax_state&&"UT"!==tax_state&&"VA"!==tax_state&&"VT"!==tax_state&&"WA"!==tax_state&&"WV"!==tax_state||(state_taxed="yes"),$.ajax({type:"post",async:!1,url:"cart/inc_cart_totals.asp",dataType:"json",data:{shipping_option:shipping_option,page_name:page_name,tax_country:tax_country,tax_state:tax_state,tax_zip:tax_zip,tax_address:tax_address,state_taxed:state_taxed},success:function(json){if(subTotal=parseFloat(json.subtotal),totalDiscount=parseFloat(json.total_discount),salesTax=json.salestax,$(".cart_subtotal").html(json.subtotal),$(".cart_grand-total").html(json.grandtotal),$(".convert-total").attr("data-price",json.grandtotal),$(".cart_sales-tax").html(json.salestax),$(".cart_coupon-amt").html(json.couponamt),$(".cart_prefferred_discount").html(json.preferred_discount),$(".shipping_amount_left").html(json.shippingneeded),$(".cart_shipping").html(json.shippingfriendly),$("#cart_gift-cert").html(json.var_total_giftcert_used),$("#store_credit_amt").html(json.store_credit_amt),$("#use_now_amount").html(json.use_now_credits),shippingWeight=json.weight,preOrderItem=json.pre_order_item,"USA"===tax_country&&$(".cart_sales-tax-state").html(json.salestax_state+" "),"USD"!=Cookies.get("currency")?updateCurrency():$(".row_convert_total").hide(),void 0!==shipping_option?$(".checkout_button").show():"yes"===$("#gift_cert_only").val()&&$(".checkout_button, #paypal-button-container").show(),"cart.asp"!==page_name&&"cart2.asp"!==page_name||($(".checkout_button").show(),json.grandtotal>=35&&$("#btn-afterpay-checkout, .checkout_afterpay").show(),json.grandtotal<=0&&($(".payment-options").html("STORE CREDIT"),$(".checkout_paypal, #btn-afterpay-checkout, .checkout_afterpay, #btn-googlepay, #btn-applepay").hide())),"$0.00"==json.use_now_credits?$("#row_use_now_credits").hide():$("#row_use_now_credits").show(),"$0.00"==json.var_total_giftcert_used?$("#row_gift_cert").hide():$("#row_gift_cert").show(),"$0.00"==json.store_credit_amt?$("#row_store_credit").hide():$("#row_store_credit").show(),$("#cim_cash, #cash").is(":checked")||(json.grandtotal<=0?($(".billing-information").fadeOut(500),$("#cash").prop("checked",!1),$("#paypal").prop("checked",!1),$('input[name="cim_billing"]:first').trigger("click"),toggleRequiredBillingFalse()):"on"===$("#paypal-checkout").val()?($(".billing-information").hide(),$(".billing-information :input").prop("disabled",!0)):($(".billing-information").fadeIn(1e3),toggleRequiredBillingTrue())),1==json.var_other_items){Cookies.set("orings","",{expires:30}),json.subtotal_after_discounts<=50?$(".cart_shipping_amountLeft").show():$(".cart_shipping_amountLeft").hide();var subtotal_free_gifts=json.fraudcheck_freegifts_subtotal;free_items_count=7,freeGiftText="";var freeGiftSubText="";if(subtotal_free_gifts<150&&(free_items_count=6,amountToGetAnotherGift=150-subtotal_free_gifts,freeGiftText="You've got <b>$"+amountToGetAnotherGift.toFixed(2)+"</b> to go to get another free gift!",clearFreeItemsCookie(7)),subtotal_free_gifts<100&&(free_items_count=5,amountToGetAnotherGift=100-subtotal_free_gifts,freeGiftText="You've got <b>$"+amountToGetAnotherGift.toFixed(2)+"</b> to go to get another free gift!",clearFreeItemsCookie(6)),subtotal_free_gifts<75&&(free_items_count=4,amountToGetAnotherGift=75-subtotal_free_gifts,freeGiftText="You've got <b>$"+amountToGetAnotherGift.toFixed(2)+"</b> to go to get another free gift.",clearFreeItemsCookie(5)),subtotal_free_gifts<50&&(free_items_count=3,amountToGetAnotherGift=50-subtotal_free_gifts,freeGiftText="You've got <b>$"+amountToGetAnotherGift.toFixed(2)+"</b> to go to get another free gift!",clearFreeItemsCookie(4)),subtotal_free_gifts<30&&(free_items_count=2,amountToGetAnotherGift=30-subtotal_free_gifts,freeGiftText="You've got <b>$"+amountToGetAnotherGift.toFixed(2)+"</b> to go to earn a free gift!",freeGiftSubText="Unlocked: O-rings & Stickers",clearFreeItemsCookie(3)),free_items_count>0){let s=free_items_count>1?"s":"";free_items_count>2&&(freeGiftSubText="Unlocked: "+(free_items_count-2)+" free gift"+s+"!");var step1icon,step1Class,step2icon="fa-lock",step2Class="icon-bg-gray",step3icon="fa-lock",step3Class="icon-bg-gray",step4icon="fa-lock",step4Class="icon-bg-gray",step5icon="fa-lock",step5Class="icon-bg-gray",step6icon="fa-lock",step6Class="icon-bg-gray";free_items_count>2&&(step2icon="fa-check",step2Class="icon-bg-blue"),free_items_count>3&&(step3icon="fa-check",step3Class="icon-bg-blue"),free_items_count>4&&(step4icon="fa-check",step4Class="icon-bg-blue"),free_items_count>5&&(step5icon="fa-check",step5Class="icon-bg-blue"),free_items_count>6&&(step6icon="fa-check",step6Class="icon-bg-blue");var stepper_html='<div class="stepper-container"><div id="free-items-stepper-info" class="text-uppercase text-center font-weight-bold p-1 mt-2"> <span id="free-items-stepper-subtitle">'+freeGiftSubText+' <br /><div class="mt-1"><a  href="#" class="btn btn-outline-primary font-weight-bold btn-free-items" data-toggle="modal" data-target="#free-items-modal"><i class="fa fa-gift fa-lg mr-1"></i>SELECT YOUR FREE ITEMS</a></span></span></div></span></div><div id="free-items-stepper-title" class="text-uppercase text-center font-weight-bold pt-2 mt-2">'+freeGiftText+'</div><div class="k-widget free-items-stepper free-items-stepper-linear mt-2"><ol class="free-items-step-list free-items-step-list-horizontal"><li class="free-items-step free-items-step-current free-items-step-focus free-items-step-first free-items-step-done free-items-step-success" style="width: 16.6666%;"><a href="#" class="btn-free-items free-items-step-link" data-toggle="modal" data-target="#free-items-modal" title="Select your free gifts" role="tab" aria-controls="wizard-0" aria-selected="false"><span class="free-items-step-indicator '+"icon-bg-blue"+'" aria-hidden="true"><span class="free-items-step-indicator-icon k-icon fa '+"fa-check"+'"></span></span><span class="free-items-step-label"><span class="free-items-step-text"></span> </span></a></li><li class="free-items-step free-items-step-current free-items-step-focus" style="width: 16.6666%;"><a href="#" class="btn-free-items free-items-step-link" data-toggle="modal" data-target="#free-items-modal" title="Select your free gifts" role="tab" aria-controls="wizard-1" aria-selected="true" aria-current="true"><span class="free-items-step-indicator '+step2Class+'" aria-hidden="true"><span class="step2-icon free-items-step-indicator-icon k-icon fa '+step2icon+'"></span></span><span class="free-items-step-label"><span class="free-items-step-text"></span> </span></a></li><li class="free-items-step free-items-step-current free-items-step-focus" style="width: 16.6666%;"><a href="#" class="btn-free-items free-items-step-link" data-toggle="modal" data-target="#free-items-modal" title="Select your free gifts" role="tab" aria-controls="wizard-2" aria-selected="false" tabindex="-1"><span class="free-items-step-indicator '+step3Class+'" aria-hidden="true"><span class="step3-icon free-items-step-indicator-icon k-icon fa '+step3icon+'"></span></span><span class="free-items-step-label"><span class="free-items-step-text"></span> </span></a></li><li class="free-items-step free-items-step-current free-items-step-focus" style="width: 16.6666%;"><a href="#" class="btn-free-items free-items-step-link" data-toggle="modal" data-target="#free-items-modal" title="Select your free gifts" role="tab" aria-controls="wizard-2" aria-selected="false" tabindex="-1"><span class="free-items-step-indicator '+step4Class+'" aria-hidden="true"><span class="step4-icon free-items-step-indicator-icon k-icon fa '+step4icon+'"></span></span><span class="free-items-step-label"><span class="free-items-step-text"></span> </span></a></li><li class="free-items-step free-items-step-current free-items-step-focus" style="width: 16.6666%;"><a href="#" class="btn-free-items free-items-step-link" data-toggle="modal" data-target="#free-items-modal" title="Select your free gifts" role="tab" aria-controls="wizard-2" aria-selected="false" tabindex="-1"><span class="free-items-step-indicator '+step5Class+'" aria-hidden="true"><span class="step5-icon free-items-step-indicator-icon k-icon fa '+step5icon+'"></span></span><span class="free-items-step-label"><span class="free-items-step-text"></span> </span></a></li><li class="free-items-step free-items-step-current free-items-step-focus free-items-step-last" style="width: 16.6666%;"><a href="#" class="btn-free-items free-items-step-link" data-toggle="modal" data-target="#free-items-modal" title="Select your free gifts" role="tab" aria-controls="wizard-2" aria-selected="false" tabindex="-1"><span class="free-items-step-indicator '+step6Class+'" aria-hidden="true"><span class="step6-icon free-items-step-indicator-icon k-icon fa '+step6icon+'"></span></span><span class="free-items-step-label"><span class="free-items-step-text"></span> </span></a></li></ol><div data-role="progressbar" class="k-widget k-progressbar k-progressbar-horizontal k-pos-absolute k-overflow-hidden" style="position: absolute; margin-left: 25px;width: 100%;"><div class="k-state-selected" style="width: calc(100% - 50px);"></div></div><div class="text-center"><a style="color:#666;font-style: italic;font-size:15px;" href="#" data-toggle="modal" data-target="#free-items-page-modal">View our free gifts</a></div></div></div>';$("#stepper").html(stepper_html)}}else free_items_count=0,$("#free-items-info").html(""),$("#stepper").html(""),clearFreeItemsCookie(1);console.log(free_items_count)}})}