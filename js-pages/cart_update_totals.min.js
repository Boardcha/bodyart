var totalWithoutShipping=0,salesTax=0,shippingWeight=0,free_items_count=0;function calcAllTotals(t){$(".checkout_button, #paypal-button-container").hide();var e=$('input[name="shipping-option"]:checked').val();$(".cart_grand-total").html('<i class="fa fa-spinner fa-spin"></i> Calculating');var a=location.pathname.substring(location.pathname.lastIndexOf("/")+1),o="",i="",r="",n="",s="",n=$("input:radio[name='cim_shipping']").is(":checked")?(o=$("input[name='cim_shipping']:checked").attr("data-country"),i=$("input[name='cim_shipping']:checked").attr("data-state"),r=$("input[name='cim_shipping']:checked").attr("data-zip"),$("input[name='cim_shipping']:checked").attr("data-address")):(o=$("select[name='shipping-country']").val(),i=$("select[name='shipping-state']").val(),r=$("input[name='shipping-zip']").val(),$("input[name='shipping-address']").val()+" "+$("input[name='shipping-address2']").val());"AR"!==i&&"CA"!==i&&"CO"!==i&&"FL"!==i&&"GA"!==i&&"HI"!==i&&"IL"!==i&&"IN"!==i&&"IA"!==i&&"KS"!==i&&"KY"!==i&&"LA"!==i&&"MA"!==i&&"ME"!==i&&"MD"!==i&&"MI"!==i&&"MN"!==i&&"NE"!==i&&"NV"!==i&&"NJ"!==i&&"NC"!==i&&"OH"!==i&&"OK"!==i&&"PA"!==i&&"RI"!==i&&"SD"!==i&&"TX"!==i&&"UT"!==i&&"VA"!==i&&"VT"!==i&&"WA"!==i&&"WV"!==i||(s="yes"),$.ajax({type:"post",async:!1,url:"cart/inc_cart_totals.asp",dataType:"json",data:{shipping_option:e,page_name:a,tax_country:o,tax_state:i,tax_zip:r,tax_address:n,state_taxed:s},success:function(t){subTotal=parseFloat(t.subtotal),totalDiscount=parseFloat(t.total_discount),salesTax=t.salestax,$(".cart_subtotal").html(t.subtotal),$(".cart_grand-total").html(t.grandtotal),$(".convert-total").attr("data-price",t.grandtotal),$(".cart_sales-tax").html(t.salestax),$(".cart_coupon-amt").html(t.couponamt),$(".cart_prefferred_discount").html(t.preferred_discount),$(".shipping_amount_left").html(t.shippingneeded),$(".cart_shipping").html(t.shippingfriendly),$("#cart_gift-cert").html(t.var_total_giftcert_used),$("#store_credit_amt").html(t.store_credit_amt),$("#use_now_amount").html(t.use_now_credits),shippingWeight=t.weight,preOrderItem=t.pre_order_item,"USA"===o&&$(".cart_sales-tax-state").html(t.salestax_state+" "),"USD"!=Cookies.get("currency")?updateCurrency():$(".row_convert_total").hide(),void 0!==e?$(".checkout_button").show():"yes"===$("#gift_cert_only").val()&&$(".checkout_button, #paypal-button-container").show(),"cart.asp"!==a&&"cart2.asp"!==a||($(".checkout_button").show(),100<=t.grandtotal&&$("#btn-afterpay-checkout, .checkout_afterpay").show(),t.grandtotal<=0&&($(".payment-options").html("STORE CREDIT"),$(".checkout_paypal, #btn-afterpay-checkout, .checkout_afterpay, #btn-googlepay, #btn-applepay").hide())),"$0.00"==t.use_now_credits?$("#row_use_now_credits").hide():$("#row_use_now_credits").show(),"$0.00"==t.var_total_giftcert_used?$("#row_gift_cert").hide():$("#row_gift_cert").show(),"$0.00"==t.store_credit_amt?$("#row_store_credit").hide():$("#row_store_credit").show(),$("#cim_cash, #cash").is(":checked")||(t.grandtotal<=0?($(".billing-information").fadeOut(500),$("#cash").prop("checked",!1),$("#paypal").prop("checked",!1),$('input[name="cim_billing"]:first').trigger("click"),toggleRequiredBillingFalse()):"on"===$("#paypal-checkout").val()?($(".billing-information").hide(),$(".billing-information :input").prop("disabled",!0)):($(".billing-information").fadeIn(1e3),toggleRequiredBillingTrue())),1==t.var_other_items?(Cookies.set("orings","",{expires:30}),t.subtotal_after_discounts<=50?$(".cart_shipping_amountLeft").show():$(".cart_shipping_amountLeft").hide(),t=t.fraudcheck_freegifts_subtotal,free_items_count=7,freeGiftText="",t<150&&(free_items_count=6,amountToGetAnotherGift=150-t,freeGiftText='<br/><span class="font-weight-normal">You’ve <b>$'+amountToGetAnotherGift.toFixed(2)+'</b> to go to get another free gift.<br><a href="#" data-toggle="modal" data-target="#free-items-page-modal">View our free gifts</a></span>',clearFreeItemsCookie(7)),t<100&&(free_items_count=5,amountToGetAnotherGift=100-t,freeGiftText='<br/><span class="font-weight-normal">You’ve <b>$'+amountToGetAnotherGift.toFixed(2)+'</b> to go to get another free gift.<br><a href="#" data-toggle="modal" data-target="#free-items-page-modal">View our free gifts</a></span>',clearFreeItemsCookie(6)),t<75&&(free_items_count=4,amountToGetAnotherGift=75-t,freeGiftText='<br/><span class="font-weight-normal">You’ve <b>$'+amountToGetAnotherGift.toFixed(2)+'</b> to go to get another free gift.<br><a href="#" data-toggle="modal" data-target="#free-items-page-modal">View our free gifts</a></span>',clearFreeItemsCookie(5)),t<50&&(free_items_count=3,amountToGetAnotherGift=50-t,freeGiftText='<br/><span class="font-weight-normal">You’ve <b>$'+amountToGetAnotherGift.toFixed(2)+'</b> to go to get another free gift.<br><a href="#" data-toggle="modal" data-target="#free-items-page-modal">View our free gifts</a></span>',clearFreeItemsCookie(4)),t<30&&(free_items_count=2,amountToGetAnotherGift=30-t,freeGiftText='<br/><span class="font-weight-normal">You’ve <b>$'+amountToGetAnotherGift.toFixed(2)+'</b> to go to earn a free gift.<br><a href="#" data-toggle="modal" data-target="#free-items-page-modal">View our free gifts</a></span>',clearFreeItemsCookie(3)),0<free_items_count&&(t=1<free_items_count?"s":"",$("#free-items-info").html('<span class="font-weight-bold"><i class="fa fa-gift"></i> You’ve earned '+free_items_count+" FREE GIFT"+t+' <a href="#" id="btn-free-items" data-toggle="modal" data-target="#free-items-modal">Select it now</a></span>'+freeGiftText))):(free_items_count=0,$("#free-items-info").html(""),clearFreeItemsCookie(1)),console.log(free_items_count)}})}