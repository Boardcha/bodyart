$("#updateEmail").change(function(){var account_email=$("#updateEmail").val();$.ajax({method:"post",dataType:"json",url:"accounts/ajax_check_duplicate_account.asp",data:{email:account_email}}).done(function(json,msg){"yes"==json.duplicate?($(".message-update-email").html('<div class="alert alert-danger">An account registered under the e-mail address '+account_email+" already exists. Please enter a different e-email address.</div>").show(),$("#updateEmail").val(""),$("#btn-update-email").prop("disabled",!0)):$("#btn-update-email").prop("disabled",!1)}).fail(function(json,msg){$(".message-update-email").html('<div class="alert alert-danger">Site error. Pleaes make sure you entered a valid email. If you continue to have trouble, please contact customer service for assistance.</div>').show(),$("#btn-update-email").prop("disabled",!0)})}),$("#frm-update-profile").submit(function(e){var form=$("#frm-update-profile");!1===form[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),console.log("invalid form elements")):($(".message-update-profile").html('<i class="fa fa-spinner fa-2x fa-spin"></i>').show(),$.ajax({method:"post",url:"accounts/ajax-update-profile.asp",data:$("#frm-update-profile").serialize()}).done(function(msg){$(".message-update-profile").html('<div class="alert alert-success">Your name has been successfully updated.</div>').show(),$(".message-update-profile").delay(5e3).fadeOut("slow")}).fail(function(msg){$(".message-update-profile").html('<div class="alert alert-danger">Site error. If you continue to have trouble, please contact customer us for assistance.</div>').show()})),form[0].classList.add("was-validated"),e.preventDefault()}),$("#frm-update-email").submit(function(e){var form=$("#frm-update-email");!1===form[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),console.log("invalid form elements")):($(".message-update-email").html('<i class="fa fa-spinner fa-2x fa-spin"></i>').show(),$.ajax({method:"post",dataType:"json",url:"accounts/ajax-update-email.asp",data:$("#frm-update-email").serialize()}).done(function(json,msg){"success"==json.status?($(".message-update-email").html('<div class="alert alert-success">Your e-mail address has been successfully updated.</div>').show(),$(".message-update-email").delay(5e3).fadeOut("slow")):$(".message-update-email").html('<div class="alert alert-danger">Error. Please make sure you entered a valid email. If you continue to have trouble, please contact customer service for assistance.</div>').show()}).fail(function(json,msg){$(".message-update-email").html('<div class="alert alert-danger">Site error. Please make sure you entered a valid email. If you continue to have trouble, please contact customer service for assistance.</div>').show()})),form[0].classList.add("was-validated"),e.preventDefault()}),$("#current_password").blur(function(){var form=$("#frm-update-pass"),current_password=$("#current_password").val(),customer_id=$("#customer_id").val();$.ajax({method:"POST",dataType:"json",url:"accounts/ajax_check_matching_password.asp",data:{password:current_password,custid:customer_id}}).done(function(json,msg){"no"==json.matches&&(form[0].classList.add("was-validated"),$("#btn-update-pass").prop("disabled",!0),$(".message-check-pass").html("The password you entered does not match the one on file").show()),"yes"==json.matches&&($("#btn-update-pass").prop("disabled",!1),form[0].classList.remove("was-validated"),$(".message-check-pass").html("Current password is required").hide())}).fail(function(json,msg){console.log("ajax failed")})}),$("#frm-update-pass").submit(function(e){var form=$("#frm-update-pass"),first_pass=$("#first_password").val(),pass_confirm=$("#profile_password_confirmation").val();!1===form[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),console.log("invalid form elements")):first_pass===pass_confirm?(console.log("passwords do match"),$(".message-update-pass").html('<i class="fa fa-spinner fa-2x fa-spin"></i>').show(),$.ajax({method:"post",dataType:"json",url:"accounts/ajax-update-password.asp",data:$("#frm-update-pass").serialize()}).done(function(json,msg){"success"==json.status?($(".message-update-pass").html('<div class="alert alert-success">Your password has been successfully updated.</div>').show(),$(".message-update-pass").delay(5e3).fadeOut("slow"),$(".password-fields").val("")):($(".message-check-pass").html("Current password is required").show(),$(".message-update-pass").html('<div class="alert alert-danger">Error. Please make sure you entered a valid password. If you continue to have trouble, please contact customer service for assistance.</div>').show())}).fail(function(json,msg){$(".message-update-pass").html('<div class="alert alert-danger">Site error. Please make sure you entered a valid password. If you continue to have trouble, please contact customer service for assistance.</div>').show()})):($(".message-update-pass").html('<div class="alert alert-danger pt-2">Your passwords do not match. Please try again.</div>').show(),$(".message-update-pass").delay(5e3).fadeOut("slow")),form[0].classList.add("was-validated"),e.preventDefault()});