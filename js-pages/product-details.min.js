function refreshMenu(){var e=$("#productid").val(),a=$("#filter-gauge").val(),t=$.Deferred();return $("#select-addtocart").load("products/ajax-details-dropdown-addtocart.asp",{productid:e,gauge:a},function(){$("#select-addtocart").show(),$("#loading-addtocart").hide(),t.resolve()}),t.promise()}function refreshOptionalColorMenu(){var e=$("#productid").val(),a=$.Deferred();return $("#select-anodization").load("products/ajax-anodize-dropdown-addtocart.asp",{productid:e},function(){$("#select-addtocart").show(),$("#loading-addtocart").hide(),a.resolve()}),a.promise()}function updateSalePrice(){var e=$('input[name="qty"]').val(),a=($('input[name="discount_amount"]').val(),$(".add-cart:checked").attr("data-actual-price"),$(".add-cart:checked").attr("data-retail-price")),t=$(".add-cart:checked").attr("data-sale-price"),o=$(".add-cart:checked").attr("data-symbol"),r=parseFloat((a-t)*e).toFixed(2),e=parseFloat(a*e).toFixed(2);0!=t&&null!=t?$(".sale-info").html('<span class="mr-3 ">Savings: '+o+r+'</span><span class="mr-3">Retail <s>'+o+e+"</s></span>"):$(".sale-info").html("")}function resetbutton(){$(".add_to_cart").hide(),$(".add-cart-message").show().html("<div class='alert alert-success my-2 p-1'>Item has been added to your cart</div>"),$(".add-cart-message").delay(3e3).fadeOut("slow"),$(".add_to_cart").prop("disabled",!1),$(".add_to_cart").html('<i class="fa fa-shopping-cart fa-lg mr-3"></i>Add to cart'),$(".add_to_cart").delay(3500).fadeIn("slow",function(){$(".add_to_cart").addClass("checkout_button"),$(".add_to_cart").removeClass("button_loading")})}function showcart(){var e=location.pathname.substring(location.pathname.lastIndexOf("/")+1);$(".cart_show").fadeIn("fast"),$(".cart_show_frame").load("cart/inc_cart_display_mini.asp",{page_name:e}),$(".cart_show").delay(8e3).fadeOut("fast")}function run_cart_mobile(){var e=location.pathname.substring(location.pathname.lastIndexOf("/")+1);$(".cart_show_frame").load("cart/inc_cart_mobile_nodisplay.asp",{page_name:e})}function changebutton(){$(".add_to_cart").prop("disabled",!0),$(".add_to_cart").html("Adding item to cart <span class='dot-one'>.</span><span class='dot-two'>.</span><span class='dot-three'>.</span>"),$(".add_to_cart").fadeIn("slow",function(){$(".add_to_cart").addClass("button_loading"),$(".add_to_cart").removeClass("checkout_button")})}$("#filter-gauge").change(function(){$("#select-addtocart").hide(),$("#loading-addtocart").show(),refreshMenu().done(function(){updateSalePrice()}),refreshOptionalColorMenu().done(function(){updateSalePrice()})}),$("#add-qty").change(function(){var_qty=$("#add-qty").val(),var_qty<=0&&$("#add-qty").val("1")}),$("#navmenu a").on("click",function(e){e.preventDefault(),$(this).tab("show")}),$(".checkout_button").prop("type","button");var isMobile=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function SlickCustomerPhotos(){$("#customer-photos").slick({slidesToShow:6,slidesToScroll:6,variableWidth:!0,prevArrow:'<div class="slider-arrow-prev"><i class="fa fa-chevron-circle-left fa-2x text-white pointer"></i></div>',nextArrow:'<div class="slider-arrow-next"><i class="fa fa-chevron-circle-right fa-2x text-white pointer"></i></div>',responsive:[{breakpoint:1920,settings:{slidesToShow:12,slidesToScroll:10}},{breakpoint:1600,settings:{slidesToShow:10,slidesToScroll:8}},{breakpoint:1024,settings:{slidesToShow:7,slidesToScroll:6}},{breakpoint:600,settings:{slidesToShow:5,slidesToScroll:4}},{breakpoint:480,settings:{slidesToShow:3,slidesToScroll:3}}]})}$(".add_to_cart").click(function(e){var a,t=$("#frm-add-cart");!1===t[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),console.log("invalid form elements"),$(".add-cart-message").show().html("<div class='alert alert-danger my-2 p-1 font-weight-bold'>Quantity &amp; item selection required</div>"),$(".add-cart-message").delay(3e3).fadeOut("slow"),t[0].classList.add("was-validated")):(t[0].classList.remove("was-validated"),var_preorder6="",(var_preorder7="")!=$("[name='preorder_field6']").val()&&(var_preorder6=$.grep([$("[name='preorder_field6_label']").val()+$("[name='preorder_field6']").val()],Boolean).join(", ")),""!=$("[name='preorder_field7']").val()&&(var_preorder7=$.grep([$("[name='preorder_field7_label']").val()+$("[name='preorder_field7']").val()],Boolean).join(", ")),changebutton(),var_detailid=$(".add-cart:checked").val(),var_anodid=$(".add-anodization:checked").val(),var_qty=$("[name='qty']").val(),var_preorders=$.grep([$("textarea#preorders").val(),$("[name='preorder_field1_label']").val()+$("[name='preorder_field1']").val(),$("[name='preorder_field2_label']").val()+$("[name='preorder_field2']").val(),$("[name='preorder_field3_label']").val()+$("[name='preorder_field3']").val(),$("[name='preorder_field4_label']").val()+$("[name='preorder_field4']").val(),$("[name='preorder_field5_label']").val()+$("[name='preorder_field5']").val(),var_preorder6,var_preorder7],Boolean).join(", "),0<var_anodid&&(var_preorders=$(".add-anodization:checked").attr("data-title")),console.log(var_preorders),a=0<getCookie("cartCount")?$(".cart-count").html():0,t=$("#customorder").val(),parseInt($(".add-cart:checked").attr("data-qty"))>=parseInt(var_qty)?$.ajax({method:"POST",url:"cart/ajax_cart_add_item.asp",data:{DetailID:var_detailid,qty:var_qty,preorders:var_preorders,customorder:t,anodID:var_anodid}}).done(function(e){$(".cart-count").html(parseInt(a)+parseInt(var_qty)),(isMobile?run_cart_mobile:showcart)(),resetbutton(),Cookies.set("cartCount",parseInt(a)+parseInt(var_qty),{expires:365})}):(resetbutton(),$(".add-cart-message").show().html("<div class='alert alert-danger my-2 p-1 font-weight-bold'>We only have "+$(".add-cart:checked").attr("data-qty")+" in stock. Please adjust your quantity.</div>")),$.getJSON("https://pro.ip-api.com/json/?key=1FbdfMEofSriXRs&fields=countryCode,region,city",function(){}).done(function(e){Cookies.set("ip-country",e.countryCode,{expires:365}),Cookies.set("ip-region",e.region,{expires:365}),Cookies.set("ip-city",e.city,{expires:365})})),e.preventDefault()}),$(document).on("click",".img-thumb",function(){var e=$(this).attr("data-id");$("#add-cart-menu label").show(),$("#msg-filtered-dropdown").html(""),null!=e&&0!=e&&($('#add-cart-menu label:not(".option_img_'+e+'")').hide(),$("#msg-filtered-dropdown").html('<span class="btn btn-sm btn-info ml-2" id="remove-filter"><i class="fa fa-undo-alt fa-flip-horizontal mr-2"></i>Reload all colors &amp; styles</span>'))}),$(document).on("click","#remove-filter",function(e){$("#add-cart-menu label").show(),$("#msg-filtered-dropdown").html(""),e.stopPropagation()}),$(document).on("change",".add-cart",function(e){var a=$(this).attr("data-img_id"),t=($("#img_thumb_"+a).attr("data-imgname"),$("#img_id_"+a).attr("data-slick-index")),o=$(this).attr("dropdown-title");$("#selected-item").html(o);o=parseFloat($(".add-cart:checked").attr("data-actual-price"));0<parseFloat($(".add-anodization:checked").attr("data-base-price"))&&(o+=parseFloat($(".add-anodization:checked").attr("data-base-price"))),0<o&&AfterpayWidget(o.toString(),minPrice=0),0!=a&&$(".slider-main-image").slick("slickGoTo",t,!0)}),$(document).on("change",".add-anodization",function(e){var a=$(this).attr("dropdown-title");$("#selected-anodization").html(a);a=parseFloat($(".add-cart:checked").attr("data-actual-price"));console.log(a),0<parseFloat($(".add-anodization:checked").attr("data-base-price"))&&(a+=parseFloat($(".add-anodization:checked").attr("data-base-price"))),0<a&&AfterpayWidget(a.toString(),minPrice=0),console.log(a)}),$(document).on("click","#dropdownAddCart",function(){$("#add-cart-menu .dropdown-menu").scrollTop(0),$(".dropdown-menu").animate({scrollTop:0},2e3)}),$(document).on("click",".btn-select-menu",function(){$("#wishlist-category, #wishlist-priority").prop("selectedIndex",0),$(".wishlist-toggle").hide(),$(".link-add-wishlist").removeClass("btn-danger"),$(".link-add-wishlist").addClass("btn-outline-danger")}),$(".qty-add").click(function(){var e=parseInt($("input[name='qty']").val());$("input[name='qty']").val(e+1)}),$(".qty-deduct").click(function(){var e=parseInt($("input[name='qty']").val());0<e-1&&$("input[name='qty']").val(e-1)}),updateSalePrice(),$(document).on("change",".add-cart, input[name='qty']",function(){updateSalePrice()}),$(".select-currency").on("click",function(e){$(".currency-menu").toggle()}),$(".currency-menu img").click(function(){var a=$(this).attr("data-currency"),t=$(this).attr("data-symbol");$.ajax({type:"post",url:"/template/inc-set-currency.asp",data:{currency:a}}).done(function(e){$(".ajax-currency").html(t+" "+a),updateCurrency().done(function(){refreshMenu(),refreshOptionalColorMenu()})})}),$(".link-add-wishlist").click(function(){$(".wishlist-toggle").show()}),$(".toggle-threading").click(function(){$(".div-toggle-threading").fadeToggle()}),$(".link-add-wishlist").on("click",function(e){$(".wishlist-message").html('<i class="fa fa-spinner fa-2x fa-spin"></i>').show(),$("#wishlist-category, #wishlist-priority").prop("selectedIndex",0),var_preorders=$.grep([$("textarea#preorders").val(),$("[name='preorder_field1_label']").val()+$("[name='preorder_field1']").val(),$("[name='preorder_field2_label']").val()+$("[name='preorder_field2']").val(),$("[name='preorder_field3_label']").val()+$("[name='preorder_field3']").val(),$("[name='preorder_field4_label']").val()+$("[name='preorder_field4']").val(),$("[name='preorder_field5_label']").val()+$("[name='preorder_field5']").val(),$("[name='preorder_field6_label']").val()+$("[name='preorder_field6']").val(),$("[name='preorder_field7_label']").val()+$("[name='preorder_field7']").val()],Boolean).join(", "),$.ajax({method:"post",url:"/wishlist/ajax-wishlist-add.asp",data:$("#frm-add-cart").serialize()+"&preorder_specs="+encodeURI(var_preorders.replace(/\&/g," and "))}).done(function(e){$(".wishlist-message").html('<div class="alert alert-success p-1 my-2">Item has been added to your wishlist</div>'),$(".wishlist-message").delay(3e3).fadeOut(),$(".link-add-wishlist").removeClass("btn-outline-danger"),$(".link-add-wishlist").addClass("btn-danger")}).fail(function(e){$(".wishlist-message").html('<div class="alert alert-danger p-1 my-2">Website error. Item did not add to wishlist. Please contact customer service if you continue to have issues.</div>'),$(".wishlist-message").delay(3e3).fadeOut()})}),$("#wishlist-category, #wishlist-priority").on("change",function(e){$(".wishlist-message").html('<i class="fa fa-spinner fa-2x fa-spin"></i>').show();var a=$('select[name="wishlist-category"]').val(),t=$('select[name="priority"]').val();$.ajax({method:"post",url:"/wishlist/ajax-wishlist-update-item.asp",data:{category:a,priority:t,session:"yes"}}).done(function(e){$(".wishlist-message").html('<div class="alert alert-success p-1 my-2">Item has been updated</div>'),$(".wishlist-message").delay(3e3).fadeOut()}).fail(function(e){$(".wishlist-message").html('<div class="alert alert-danger p-1 my-2">Website error. Update failed. Please contact customer service if you continue to have issues.</div>'),$(".wishlist-message").delay(3e3).fadeOut()})}),$(".link-wishlist").on("click",function(e){var a=$(this).attr("data-detailid"),t=$(this).attr("data-productid");$(".message-outs").hide(),$(".message-outs-"+a).html('<i class="fa fa-spinner fa-2x fa-spin"></i>').show(),$.ajax({method:"post",url:"/wishlist/ajax-wishlist-add.asp",data:{"add-cart":a,productid:t}}).done(function(e){$(".message-outs-"+a).html('<div class="alert alert-success p-1 my-1">Item has been added to your wishlist</div>'),$(".message-outs-"+a).delay(3e3).fadeOut(),$(".add-wishlist-"+a).removeClass("btn-outline-danger"),$(".add-wishlist-"+a).addClass("btn-danger")}).fail(function(e){$(".message-outs-"+a).html('<div class="alert alert-danger">Website error. Item did not add to wishlist. Please contact customer service if you continue to have issues.</div>'),$(".message-outs-"+a).delay(3e3).fadeOut()})}),$(".link-waiting").on("click",function(e){var a=$(this).attr("data-detailid");$(".btn-add-waiting").attr("data-detailid",a),$(".frm-add-waiting").show().appendTo(".add-waiting-"+a)}),$(".btn-add-waiting").on("click",function(e){var a=$(this).attr("data-detailid");$(".frm-add-waiting").hide(),$(".message-outs-"+a).html('<i class="fa fa-spinner fa-2x fa-spin"></i>').show(),$.ajax({method:"post",url:"/products/ajax-add-waiting-list.asp",data:$("#frm-add-waiting").serialize()+"&"+$.param({detailid:a})}).done(function(e){$(".message-outs-"+a).html('<div class="alert alert-success my-2 p-1">You have been added to the waiting list</div>'),$(".message-outs-"+a).delay(3e3).fadeOut()}).fail(function(e){$(".message-outs-"+a).html('<div class="notice-red">Website error. Item did not add to the waiting list. Please contact customer service if you continue to have issues.</div>'),$(".message-outs-"+a).delay(3e3).fadeOut()})}),$.fancybox.defaults.loop=!0,$(".slider-main-image").slick({slidesToShow:1,slidesToScroll:1,fade:!0,prevArrow:!1,nextArrow:!1}),$("#vert-thumb-carousel").slick({asNavFor:".slider-main-image",vertical:!0,verticalSwiping:!0,focusOnSelect:!0,prevArrow:'<i class="fa fa-chevron-up fa-lg p-1 btn-block btn btn-dark btn-sm rounded-0"></i>',nextArrow:'<i class="fa fa-chevron-down fa-lg p-1 btn-block btn btn-dark btn-sm rounded-0"></i>',responsive:[{breakpoint:3e3,settings:{slidesToShow:7,slidesToScroll:1}},{breakpoint:1920,settings:{slidesToShow:6,slidesToScroll:1}},{breakpoint:1600,settings:{slidesToShow:6,slidesToScroll:1}},{breakpoint:1024,settings:{slidesToShow:5,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:480,settings:{slidesToShow:3,slidesToScroll:3}}]}),$("#recents,#cross-selling").slick({slidesToShow:6,slidesToScroll:6,prevArrow:'<div class="slider-arrow-prev"><i class="fa fa-chevron-circle-left fa-2x text-white pointer"></i></div>',nextArrow:'<div class="slider-arrow-next"><i class="fa fa-chevron-circle-right fa-2x text-white pointer"></i></div>',responsive:[{breakpoint:3e3,settings:{slidesToShow:10,slidesToScroll:10}},{breakpoint:1024,settings:{slidesToShow:7,slidesToScroll:7}},{breakpoint:600,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:480,settings:{slidesToShow:3,slidesToScroll:3}}]});var productid=$("#productid_num").attr("data-productid");$.ajax({method:"POST",url:"/gallery/ajax-photo-gallery.asp",data:{productid:productid}}).done(function(e){response=e,$("#customer-photo-loader").html(response),SlickCustomerPhotos()}),$(document).on("change","#filter_photos_gauge, #filter_photos_color",function(){var e=$("#productid_num").attr("data-productid"),a=$(this).attr("data-type"),t=$(this).attr("data-filter"),o=$("#filter_photos_gauge").val(),r=$("#filter_photos_color").val(),i=$(this).attr("data-replace"),s=$(this).attr("id"),d=$(this).val();$("#customer-photo-loader").load("/gallery/ajax-photo-gallery.asp?productid="+e+"&gauge="+o+"&color="+r,function(){SlickCustomerPhotos()}),console.log("gauge: "+o+" ||  color: "+r+" ||  this value: "+d+" ||  type: "+a+" ||  filter: "+t),$.ajax({method:"POST",url:"/products/ajax-change-select-menus-reviews-gallery.asp",data:{productid:e,type:a,filter:t,this_value:d,gauge:decodeURIComponent(o),color:decodeURIComponent(r)}}).done(function(e){response=e,"All"!=d?(console.log("refresh other menu"),$("#"+i).children("option:not(:selected), optgroup").remove(),$("#"+i).append(response)):(console.log("refresh current menu"),$("#"+s).children("option:not(:selected), optgroup").remove(),$("#"+s).append(response))})}),$(document).on("click","#customer-photo-loader .page-link",function(e){e.preventDefault();e=$(this).attr("href");console.log(e),$("#customer-photo-loader").load("/gallery/ajax-photo-gallery.asp"+e,function(){SlickCustomerPhotos()})});productid=$("#productid_num").attr("data-productid");$("#div_product_reviews").load("products/ajax_product_reviews.asp?productid="+productid),$(document).on("click","#div_product_reviews a",function(e){e.preventDefault();e=$(this).attr("href");$("#div_product_reviews").load("products/ajax_product_reviews.asp"+e)}),$(document).on("change","#filter_review_gauge, #filter_review_color",function(){var e=$("#productid_num").attr("data-productid"),a=$("#filter_review_gauge").val(),t=$("#filter_review_color").val(),o=$(this).attr("data-replace"),r=$(this).attr("id"),i=$(this).val(),s=$(this).attr("data-type"),d=$(this).attr("data-filter");$("#div_product_reviews").load("products/ajax_product_reviews.asp?productid="+e+"&gauge="+a+"&color="+t),console.log("gauge: "+a+" ||  color: "+t+" ||  this value: "+i+" ||  type: "+s+" ||  filter: "+d),$.ajax({method:"POST",url:"/products/ajax-change-select-menus-reviews-gallery.asp",data:{productid:e,type:s,filter:d,this_value:i,gauge:decodeURIComponent(a),color:decodeURIComponent(t)}}).done(function(e){response=e,"All"!=i?(console.log("refresh other menu"),$("#"+o).children("option:not(:selected), optgroup").remove(),$("#"+o).append(response)):(console.log("refresh current menu"),$("#"+r).children("option:not(:selected), optgroup").remove(),$("#"+r).append(response))})}),$(document).on("click",".hover-rating",function(){var e=$(this).attr("data-rating"),a=$("#productid").val(),t=$("#filter_review_gauge").val(),o=$("#filter_review_color").val();$("#div_product_reviews").load("products/ajax_product_reviews.asp?productid="+a+"&filter_rating="+e+"&gauge="+t+"&color="+o)}),$(document).on("click","#show-mm",function(e){Cookies.set("showmm","yes",{expires:365}),refreshMenu(),$("#show-mm").hide(),$("#hide-mm").show()}),$(document).on("click","#hide-mm",function(e){Cookies.remove("showmm"),refreshMenu(),$("#show-mm").show(),$("#hide-mm").hide()}),$(document).ready(function(){$("#modal-report-photo").on("show.bs.modal",function(e){$(this).find("#report-photo-label").html("Report this photo")}),$("#frmReportPhoto").submit(function(e){var a,t,o=$("#frmReportPhoto");!1===o[0].checkValidity()?(e.preventDefault(),e.stopPropagation(),console.log("invalid form elements")):(a=$(".fancybox-slide--current .fancybox-image").attr("src"),t=$(".fancybox-caption").text(),$("#report-photo-message").load("/emails/ajax_report_photo.asp",{comments:$("#report-photo-comments").val(),url:window.location.href,img_src:a,caption:t},function(){window.setTimeout(function(){$("#report-photo-message").html("")},5e3)})),o[0].classList.add("was-validated"),e.preventDefault()})});